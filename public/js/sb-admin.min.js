function fill_note_id(t, e) { if ($("#frm_add_comment").find('input[name="note_id"]').val(t), $("#frm_add_comment").find('input[name="task_status"]').val(e), "completed" == e) { $("#frm_add_comment").hide(); $("#server-results_comment").toggleClass("alert-danger"), $("#server-results_comment").html("This task is completed. But you can still see the Comment History.") } } function fill_edit_contact_form(t) { var e = 0 == t.address_zip ? "" : t.address_zip; $("#frm_edit_contact").find('input[name="edit_contact_id"]').val(t.id), $("#frm_edit_contact").find('input[name="edit_contact_address_id"]').val(t.Address_Id), $("#frm_edit_contact").find('input[name="title"]').val(t.Contact_Title), $("#frm_edit_contact").find('input[name="first"]').val(t.Contact_First), $("#frm_edit_contact").find('input[name="last"]').val(t.Contact_Last), $("#frm_edit_contact").find('input[name="email"]').val(t.Email), $("#frm_edit_contact").find('input[name="phone"]').val(t.Phone), $("#frm_edit_contact").find('input[name="company"]').val(t.Company), $("#frm_edit_contact").find('input[name="lead_referral_source"]').val(t.Lead_Referral_Source), $("#frm_edit_contact").find('input[name="designation"]').val(t.Title), $("#frm_edit_contact").find('input[name="industry"]').val(t.Industry), $("#frm_edit_contact").find('input[name="website"]').val(t.Website), $("#frm_edit_contact").find('input[name="background"]').val(t.Background_Info), $("#frm_edit_contact").find('input[name="address1"]').val(t.address), $("#frm_edit_contact").find('input[name="street"]').val(t.address_street1), $("#frm_edit_contact").find('input[name="city"]').val(t.address_city), $("#frm_edit_contact").find('input[name="state"]').val(t.address_state), $("#frm_edit_contact").find('input[name="zip"]').val(e), $('#frm_edit_contact #country option[value="' + t.address_country + '"').attr("selected", "selected").change(); var a = "edit_contact_address_id=" + t.Address_Id + "&title=" + t.Contact_Title + "&first=" + t.Contact_First + "&last=" + t.Contact_Last + "&email=" + t.Email + "&phone=" + t.Phone + "&company=" + t.Company + "&lead_referral_source=" + t.Lead_Referral_Source + "&designation=" + t.Title + "&industry=" + t.Industry + "&website=" + t.Website + "&background=" + t.Background_Info + "&address1=" + t.address + "&street=" + t.address_street1 + "&city=" + t.address_city + "&state=" + t.address_state + "&zip=" + e + "&country=" + t.address_country; $("#frm_edit_contact").find('input[name="edit_contact_original_values"]').val(a) } function move(t, e, a) { if (t != e) { if (!confirm("Are you sure you want to move this?")) return !1; "won" == e ? $("#dealwonModal").modal("show") : "lost" == e && $("#deallostModal").modal("show"), "won" == e ? ($("#frm_deal_won").find('input[name="own_deal_stage"]').val(t), $("#frm_deal_won").find('input[name="own_deal_id"]').val(a)) : "lost" == e ? $("#frm_deal_lost").find('input[name="lost_deal_id"]').val(a) : $.post("/sales/move", { current: t, to_move: e, deal_id: a }, function (t, s) { "200" == t && "won" != e && "lost" != e ? window.location.reload() : "won" == e ? $("#deal_id").val(a) : "lost" == e && $("#lost_deal_id").val(a) }) } } !function ($) { "use strict"; $("[data-hover='tooltip']").tooltip(), $(document).ready(function () { 1 === $(".datatable").length && $(".datatable").DataTable({ bAutoWidth: !0, bPaginate: !0, bLengthChange: !0, bInfo: !1 }) }), $("#sidebarToggle").on("click", function (t) { t.preventDefault(), $("body").toggleClass("sidebar-toggled"), $(".sidebar").toggleClass("toggled") }), $("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel", function (t) { if ($(window).width() > 768) { var e = t.originalEvent, a = e.wheelDelta || -e.detail; this.scrollTop += 30 * (a < 0 ? 1 : -1), t.preventDefault() } }), $(document).on("scroll", function () { $(this).scrollTop() > 100 ? $(".scroll-to-top").fadeIn() : $(".scroll-to-top").fadeOut() }), $(document).on("click", "a.scroll-to-top", function (t) { var e = $(this); $("html, body").stop().animate({ scrollTop: $(e.attr("href")).offset().top }, 1e3, "easeInOutExpo"), t.preventDefault() }), $(".validatedForm").validate({ rules: { inputPassword: { minlength: 5 }, confirmPassword: { minlength: 5, equalTo: "#inputPassword" } } }), $("#registerButton").click(function () { console.log($(".validatedForm").valid()) }), $("#btn_activation_submit").click(function () { console.log($(".validatedForm").valid()) }), $("#btn_change_password_submit").click(function () { console.log($(".validatedForm").valid()), $("#registerButton").attr("disabled", !0) }), $("#tabs_add_forms li a").click(function () { var t = $(this).attr("id"); $(this).hasClass("inactive") && ($("#tabs_add_forms li a").addClass("inactive"), $(this).removeClass("inactive"), $(".container_tabs_add_forms").hide(), $("#" + t + "C").fadeIn("slow")) }), $("#tabs_add_leads li a").click(function () { $.fn.dataTable.ext.errMode = "none"; var t = $(this).attr("id"), e = $(this).text(); $.post("/sales/get_deal_details", { contact: e }, function (e, a) { $("#" + t + "C").html(e), $(".datatable_deals").DataTable({ bAutoWidth: !0, bPaginate: !0, bLengthChange: !0, bInfo: !1 }) }), $(this).hasClass("inactive") && ($("#tabs_add_leads li a").addClass("inactive"), $(".budget_total_active").removeClass("budget_total_active"), $("#budget_" + t).toggleClass("budget_total_active"), $(this).removeClass("inactive"), $(".container_tabs_add_leads").hide(), $("#" + t + "C").fadeIn("slow")) }), $("#contact_lookup").keyup(function () { var t = this.value; $.post("/sales/contact_lookup", { contact: t }, function (t, e) { "" != t && ($("#contact").html(t), $("#contact").show(), $("#contact_select").change(function () { var t = $("#contact_select").find(":selected").val().split("#"); $("#contact_lookup").val(t[0]), $("#email").val(t[1]), $("#company").val(t[2]), $("#phone").val(t[3]), $("#contact").html(), $("#contact").hide() })) }) }), $("#frm_add_deal").submit(function (t) { t.preventDefault(), $("#deal_submit").attr("disabled", !0); var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(); $.ajax({ url: e, type: a, data: s, cache: !1, processData: !1 }).done(function (t) { $("#deal_submit").attr("disabled", !1), "200" == t ? ($("#server-results").removeClass("alert-danger"), $("#server-results").addClass("alert-success"), t = "Deal successfully saved. You can add To do now.", $("#server-results").html(t), $("#frm_add_deal").trigger("reset"), window.setTimeout(function () { location.reload() }, 1e3)) : "409" == t ? (t = "Deal not saved. Form has been tampered. Or your Deal limit reached. Kindly contact admin.", $("#server-results").html(t)) : (t = "Deal not saved. Kindly check if you have Contact otherwise add Contact first.", $("#server-results").html(t)) }) }), $("#frm_add_todo").submit(function (t) { t.preventDefault(), $("#todo_submit").attr("disabled", !0); var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(); $.ajax({ url: e, type: a, data: s, cache: !1, processData: !1 }).done(function (t) { $("#todo_submit").attr("disabled", !1), "200" == t ? ($("#server-result_todo").removeClass("alert-danger"), $("#server-result_todo").addClass("alert-success"), t = "To do successfully saved.", $("#server-result_todo").html(t), $("#frm_add_todo").trigger("reset"), window.setTimeout(function () { location.reload() }, 1e3)) : (t = "Todo not saved. Kindly check if you have Contact and Deal otherwise add Contact and Deal first.", $("#server-result_todo").html(t)) }) }), $("#frm_add_contact").submit(function (t) { t.preventDefault(), $("#contact_submit").attr("disabled", !0); var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(); $.ajax({ url: e, type: a, data: s, cache: !1, processData: !1 }).done(function (t) { $("#contact_submit").attr("disabled", !1), "200" == t ? ($("#server-results_contact").removeClass("alert-danger"), $("#server-results_contact").addClass("alert-success"), t = "Contact successfully saved.", $("#server-results_contact").html(t), $("#frm_add_contact").trigger("reset"), window.setTimeout(function () { location.reload() }, 1e3)) : "409" == t ? (t = "Duplicate contact or your company contacts limit reached kindly contact to admin.", $("#server-results_contact").html(t)) : (t = "Contact not saved.", $("#server-results_contact").html(t)) }) }), $("#tabs_add_forms li a").click(function () { var t = $(this).attr("id"); $(this).hasClass("inactive") && ($("#tabs_add_forms li a").addClass("inactive"), $(this).removeClass("inactive"), $(".container_tabs_add_forms").hide(), $("#" + t + "C").fadeIn("slow")) }), $("#tabs_add_comments li a").click(function () { var t = $(this).attr("id"), e = $("#note_id").val(); "tabs_add_comments_tab2" == t && $.post("/sales/get_note_comments", { note_id: e }, function (e, a) { $("#" + t + "C").html(e) }), $(this).hasClass("inactive") && ($("#tabs_add_comments li a").addClass("inactive"), $(this).removeClass("inactive"), $(".container_tabs_add_comments").hide(), $("#" + t + "C").fadeIn("slow")) }), $("#frm_add_comment").submit(function (t) { t.preventDefault(); var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(); $.ajax({ url: e, type: a, data: s, cache: !1, processData: !1 }).done(function (t) { "200" == t ? (t = "Comment successfully saved.", $("#server-results_comment").html(t), $("#frm_add_comment").trigger("reset"), window.setTimeout(function () { location.reload() }, 1e3)) : (t = "Comment not saved.", $("#server-results_comment").html(t)) }) }), $(document).on("submit", "#frm_delete_comment", function (t) { t.preventDefault(); var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(), o = s.split("&"), d = (o = o[1].split("="))[1]; $.ajax({ url: e, type: a, data: s, cache: !1, processData: !1 }).done(function (t) { if ("200" == (t = $.parseJSON(t)).status) { d = t.data; $("#server-result_comment_edit").addClass("alert-success"), $("#server-result_comment_edit").html("Comment successfully deleted."), setTimeout(function () { $.post("/sales/get_note_comments", { note_id: d }, function (t, e) { $("#tabs_add_comments_tab2C").html(t) }) }, 1e3) } else $("#server-result_comment_edit").addClass("alert-danger"), t = "Comment not deleted.", $("#server-result_comment_edit").html(t) }) }), $("#add_comment").on("hidden.bs.modal", function () { $("#frm_add_comment").show(); $("#server-results_comment").toggleClass("alert-success"), $("#server-results_comment").html("Fill the below form. Red border means required field.") }), $("#edit_deal_contact_lookup").keyup(function () { var t = this.value; $.post("/sales/edit_contact_lookup", { contact: t }, function (t, e) { "" != t && ($("#edit_deal_contact").html(t), $("#edit_deal_contact").show(), $("#edit_deal_contact_select").change(function () { var t = $("#edit_deal_contact_select").find(":selected").val().split("#"); $("#edit_deal_contact_lookup").val(t[0]), $("#edit_deal_email").val(t[1]), $("#edit_deal_company").val(t[2]), $("#edit_deal_phone").val(t[3]), $("#edit_deal_contact").html(), $("#edit_deal_contact").hide() })) }) }), $(document).on("submit", "#frm_edit_deal", function (event) { event.preventDefault(); var post_url = $(this).attr("action"), request_method = $(this).attr("method"), form_data = $(this).serialize(), data = form_data_serialize_to_assoc_array(form_data), original_data = form_data_serialize_to_assoc_array(data.original_values), id = null, proposal_due_date = null, data_changed = 0; if ($(original_data).each(function (index, item) { return proposal_due_date = void 0 === data.edit_deal_proposal_due_date ? eval("data.edit_deal_proposal_due_date_" + data.edit_deal_id) : data.edit_deal_proposal_due_date, id = item.edit_deal_id, item.edit_deal_amount != data.edit_deal_amount ? (data_changed = 1, !1) : item.edit_deal_company != data.edit_deal_company ? (data_changed = 1, !1) : item.edit_deal_contact_lookup != data.edit_deal_contact_lookup ? (data_changed = 1, !1) : item.edit_deal_deal != data.edit_deal_deal ? (data_changed = 1, !1) : item.edit_deal_deliverables != data.edit_deal_deliverables ? (data_changed = 1, !1) : item.edit_deal_phone != data.edit_deal_phone ? (data_changed = 1, !1) : item.edit_deal_project_description != data.edit_deal_project_description ? (data_changed = 1, !1) : item.edit_deal_proposal_due_date != proposal_due_date ? (data_changed = 1, !1) : item.edit_deal_rating != data.edit_deal_rating ? (data_changed = 1, !1) : item.edit_deal_stage != data.edit_deal_stage ? (data_changed = 1, !1) : item.edit_deal_email != data.edit_deal_email ? (data_changed = 1, !1) : void 0 }), 1 == data_changed) $.ajax({ url: post_url, type: request_method, data: form_data, cache: !1, processData: !1 }).done(function (t) { "200" == t ? (t = "Deal successfully updated.", $(".edit_deal_server-results").html(t), $(".simple-form").trigger("reset"), $(".simple-form").hide(), window.setTimeout(function () { location.reload() }, 1e3)) : "409" == t ? (t = "Deal not updated. All values are same.", $(".edit_deal_server-results").html(t)) : (t = "Deal not updated.", $(".edit_deal_server-results").html(t)) }); else { var response = "Deal not updated, no change found."; $(".edit_deal_server-results").html(response), $(".edit_deal_server-results_deal-other").html(response) } }), $(document).on("submit", "#frm_data_deal_delete_other", function (t) { if (t.preventDefault(), 1 != confirm("Are you sure to hide this deal?")) return !1; var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(); $.ajax({ url: e, type: a, data: s, cache: !1, processData: !1 }).done(function (t) { "200" == t ? (t = "Deal successfully deleted.", $("#response_display").addClass("alert-success"), $("#response_display").html(t), $("#frm_data_deal_delete").trigger("reset"), $("#frm_data_deal_delete").hide(), window.setTimeout(function () { location.reload() }, 1e3)) : "409" == t ? ($("#response_display").addClass("alert-warning"), t = "Deal not updated. All values are same.", $("#response_display").html(t)) : ($("#response_display").addClass("alert-danger"), t = "Deal not updated.", $("#response_display").html(t)) }) }), $(document).on("hidden.bs.modal", function () { }), $(".edit_deal_proposal_due_date").each(function (t, e) { $("#" + $(e).attr("id")).datepicker({ minDate: new Date({ dateFormat: "dd-mm-yy" }) }) }), $(document).on("click", "#sales_task_edit_submit", function (t) { $(".edit_deal_proposal_due_date").each(function (t, e) { $("#" + $(e).attr("id")).datepicker({ minDate: new Date({ dateFormat: "dd-mm-yy" }) }) }) }), $("#proposal_due_date").datepicker({ minDate: new Date({ dateFormat: "dd-mm-yy" }) }), $("#todo_due_date").datepicker({ minDate: new Date({ dateFormat: "dd-mm-yy" }) }), $("#edit_task_modal #todo_due_date_edit").datepicker({ minDate: new Date({ dateFormat: "dd-mm-yy" }) }), $("#edit_deal_proposal_due_date").datepicker({ minDate: new Date({ dateFormat: "dd-mm-yy" }) }), jQuery("#sales_analytics_from").datepicker({ dateFormat: "mm/dd/yy", changeMonth: !0, changeYear: !0, maxDate: "0", onClose: function (t) { jQuery("#sales_analytics_to").datepicker("option", "minDate", t) } }), jQuery("#sales_analytics_to").datepicker({ dateFormat: "mm/dd/yy", changeMonth: !0, changeYear: !0, maxDate: "0", onClose: function (t) { jQuery("#sales_analytics_from").datepicker("option", "maxDate", t) } }), jQuery("#manager_analytics_from").datepicker({ dateFormat: "mm/dd/yy", changeMonth: !0, changeYear: !0, maxDate: "0", onClose: function (t) { jQuery("#manager_analytics_to").datepicker("option", "minDate", t) } }), jQuery("#manager_analytics_to").datepicker({ dateFormat: "mm/dd/yy", changeMonth: !0, changeYear: !0, maxDate: "0", onClose: function (t) { jQuery("#manager_analytics_from").datepicker("option", "maxDate", t) } }), $(document).on("click", "#edit_deal_proposal_due_date_other", function () { $(this).datepicker({ minDate: new Date({ dateFormat: "dd-mm-yy" }) }) }), $('[data-toggle="tooltip"]').tooltip(), $(document).on("click", "#settings", function (t) { $("#sortable_pipeline_stages").sortable() }), $(document).on("submit", "#frm_settings_add", function (t) { t.preventDefault(); var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(), o = $("#new_stage").val(); 0 == /^[a-zA-Z0-9- ]*$/.test(o) && $("#server-result_settings").html("Your Stage name contains illegal characters."), $.ajax({ url: e, type: a, data: s, dataType: "json", cache: !1, processData: !1 }).done(function (t) { var e = "Pipeline not updated."; "200" == t.status ? (e = "Pipeline successfully updated.", $("#server-result_settings").html(e), $("#sortable_pipeline_stages").append(t.data), window.setTimeout(function () { location.reload() }, 1e3)) : "409" == t.status ? (e = "Pipeline not updated.", $("#server-result_settings").html(e)) : $("#server-result_settings").html(e) }) }), $(document).on("click", ".stage-close", function (t) { t.preventDefault(), $(this).parent().hide(); var e = $(this).attr("id"), a = $("#frm_settings_add").attr("action"), s = $("#frm_settings_add").attr("method"), o = []; o.push({ change: "delete", csrf: $("#csrf").val(), stage_id: e }), $.ajax({ url: a, type: s, data: { data: o }, dataType: "json" }).done(function (t) { var e = "You can add edit stages by dragging it to new position"; "200" == t.status ? (e = "Pipeline successfully deleted.", $("#server-result_settings").html(e)) : "409" == t.status ? (e = "Pipeline not deleted. ", $("#server-result_settings").html(e)) : $("#server-result_settings").html(e) }).fail(function (t) { console.log(t) }) }), $("#sortable_pipeline_stages").sortable({ update: function (t, e) { t.preventDefault(); var a = [], s = []; $("#sortable_pipeline_stages li").each(function (t) { a.push($(this).attr("id")), s.push($(this).attr("data")) }), a = a.join("#"), s = s.join("#"); var o = $("#frm_settings_add").attr("action"), d = $("#frm_settings_add").attr("method"), i = []; i.push({ change: "update", csrf: $("#csrf").val(), stage_ids: a, stage_values: s }), $.ajax({ url: o, type: d, data: { data: i }, dataType: "json" }).done(function (t) { var e = "You can add edit stages by dragging it to new position"; "200" == t.status ? (e = "Pipeline successfully updated.", $("#server-result_settings").html(e)) : "409" == t.status ? (e = "Pipeline not updated. Existing Deals are in stages can't move", $("#server-result_settings").html(e)) : $("#server-result_settings").html(e) }).fail(function (t) { console.log(t) }) } }), $("#frm_invite_sales_rep").submit(function (t) { $("#frm_invite_sales_rep_submit").attr("disabled", !0); $("#frm_invite_sales_rep_server-results").html("Please wait while validating, processing and sending mail."), t.preventDefault(); var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(); $.ajax({ url: e, type: a, data: s, cache: !1, processData: !1 }).done(function (t) { $("#frm_invite_sales_rep_submit").attr("disabled", !1), "200" == t ? (t = "Invitation successfully sent. Request her/him to check her/his email.", $("#frm_invite_sales_rep_server-results").toggleClass("alert-warning alert-success"), $("#frm_invite_sales_rep_server-results").html(t), $("#frm_invite_sales_rep")[0].reset()) : "409" == t ? (t = "Email already exist. Kindly contact to admin.", $("#frm_invite_sales_rep_server-results").html(t)) : (t = "Invitation not able to sent.", $("#frm_invite_sales_rep_server-results").html(t)) }) }), $("#sales_chart_submit").click(function (t) { $("#posted_sales_analytics_from").val($("#sales_analytics_from").val()), $("#posted_sales_analytics_to").val($("#sales_analytics_to").val()) }), $("#myAreaChartSales").ready(function (t) { var e = ""; void 0 !== $("#posted_sales_analytics_from").val() && void 0 !== $("#posted_sales_analytics_to").val() && ((e = new FormData).append("analytics_from", $("#posted_sales_analytics_from").val()), e.append("analytics_to", $("#posted_sales_analytics_to").val())); $.ajax({ url: "/sales/get_chart_data_for_dashboard", type: "post", data: e, processData: !1, contentType: !1 }).done(function (t) { if ("<" != t.charAt(0) && "200" == (t = $.parseJSON(t)).status) { Chart.defaults.global.defaultFontFamily = '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif', Chart.defaults.global.defaultFontColor = "#292b2c"; var e = document.getElementById("myAreaChartSales"); if (null !== e) { e = e.getContext("2d"); var a = new Array, s = new Array, o = 0; t.data.currency; $.each(t.data, function (t, e) { o < e.budget && (o = parseInt(e.budget)), a.push(e.created_at), s.push(e.budget) }); new Chart(e, { type: "line", data: { labels: a, datasets: [{ label: "Budget", lineTension: .3, backgroundColor: "rgba(2,117,216,0.2)", borderColor: "rgba(2,117,216,1)", pointRadius: 5, pointBackgroundColor: "rgba(2,117,216,1)", pointBorderColor: "rgba(255,255,255,0.8)", pointHoverRadius: 5, pointHoverBackgroundColor: "rgba(2,117,216,1)", pointHitRadius: 50, pointBorderWidth: 2, data: s }] }, options: { scales: { xAxes: [{ time: { unit: "date" }, gridLines: { display: !1 }, ticks: { maxTicksLimit: 15 } }], yAxes: [{ ticks: { min: 0, max: o, maxTicksLimit: 15 }, gridLines: { color: "rgba(0, 0, 0, .125)" } }] }, legend: { display: !0 } } }) } else { t = "No data found."; console.log(t) } } }) }), $("#myAreaChartManager").ready(function (t) { $.ajax({ url: "/manager/get_chart_data_for_dashboard", type: "post", data: "", cache: !1, processData: !1 }).done(function (t) { if ("<" != t.charAt(0) && "200" == (t = $.parseJSON(t)).status) { Chart.defaults.global.defaultFontFamily = '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif', Chart.defaults.global.defaultFontColor = "#292b2c"; var e = document.getElementById("myAreaChartManager"); if (null !== e) { e = e.getContext("2d"); var a = new Array, s = new Array, o = 0; t.data.currency; $.each(t.data, function (t, e) { o < e.budget && (o = parseInt(e.budget)), a.push(e.created_at), s.push(e.budget) }); new Chart(e, { type: "line", data: { labels: a, datasets: [{ label: "Budget", lineTension: .3, backgroundColor: "rgba(2,117,216,0.2)", borderColor: "rgba(2,117,216,1)", pointRadius: 5, pointBackgroundColor: "rgba(2,117,216,1)", pointBorderColor: "rgba(255,255,255,0.8)", pointHoverRadius: 5, pointHoverBackgroundColor: "rgba(2,117,216,1)", pointHitRadius: 50, pointBorderWidth: 2, data: s }] }, options: { scales: { xAxes: [{ time: { unit: "date" }, gridLines: { display: !1 }, ticks: { maxTicksLimit: 15 } }], yAxes: [{ ticks: { min: 0, max: o, maxTicksLimit: 15 }, gridLines: { color: "rgba(0, 0, 0, .125)" } }] }, legend: { display: !0 } } }) } else t = "No data found." } }) }), $("#myAreaChartManagerPost").ready(function (t) { if ("/manager/analytics" == window.location.pathname) { $.ajax({ url: "/manager/get_chart_data_for_dashboard", type: "post", data: "", cache: !1, processData: !1 }).done(function (t) { if ("<" != t.charAt(0) && "200" == (t = $.parseJSON(t)).status) { Chart.defaults.global.defaultFontFamily = '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif', Chart.defaults.global.defaultFontColor = "#292b2c"; var e = document.getElementById("myAreaChartManagerPost"); if (null !== e) { e = e.getContext("2d"); var a = new Array, s = new Array, o = 0; t.data.currency; $.each(t.data, function (t, e) { o < e.budget && (o = parseInt(e.budget)), a.push(e.created_at), s.push(e.budget) }); new Chart(e, { type: "line", data: { labels: a, datasets: [{ label: "Budget", lineTension: .3, backgroundColor: "rgba(2,117,216,0.2)", borderColor: "rgba(2,117,216,1)", pointRadius: 5, pointBackgroundColor: "rgba(2,117,216,1)", pointBorderColor: "rgba(255,255,255,0.8)", pointHoverRadius: 5, pointHoverBackgroundColor: "rgba(2,117,216,1)", pointHitRadius: 50, pointBorderWidth: 2, data: s }] }, options: { scales: { xAxes: [{ time: { unit: "date" }, gridLines: { display: !1 }, ticks: { maxTicksLimit: 15 } }], yAxes: [{ ticks: { min: 0, max: o, maxTicksLimit: 15 }, gridLines: { color: "rgba(0, 0, 0, .125)" } }] }, legend: { display: !0 } } }) } else t = "No data found.", console.log(t) } }) } }), $("#frm_login").submit(function (t) { t.preventDefault(); var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(); $("#btn_login").attr("disabled", !0), $.ajax({ url: e, type: a, data: s, cache: !1, processData: !1 }).done(function (t) { $("#btn_login").attr("disabled", !1), "200" == t ? (t = "Login verification code successfully sent. Kindly check your email. Do not close this Login form. Here you have to enter the code to login.", $("#login_result").removeClass(), $("#login_result").addClass("alert"), $("#login_result").addClass("alert-success"), $("#login_result").html(t), $("#login_code_form").hide(), $("#login_code_form").empty(), $("#login_form").show()) : "201" == t ? (t = "Login verification code successfully sent few minutes back. Kindly check your email. Do not close this Login form. Here you have to enter the code to login. If you do not get email kindly wait for few minute and try again.", $("#login_result").removeClass(), $("#login_result").addClass("alert-success"), $("#login_result").html(t), $("#login_code_form").hide(), $("#login_code_form").empty(), $("#login_form").show()) : "409" == t ? ($("#login_result").toggleClass("alert-warning alert-danger"), t = "Email or Password not matched.", $("#login_result").html(t)) : "202" == t ? location.reload() : (t = "Invitation not able to sent.", $("#login_result").html(t)) }) }), $("#frm_deal_won").submit(function (t) { t.preventDefault(); var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(); $.ajax({ url: e, type: a, data: s, cache: !1, processData: !1 }).done(function (t) { "200" == t ? (t = "Congratulation you won the deal also your feed back has been submitted successfully.", $("#deal_won_result").addClass("alert-success"), $("#frm_deal_won").trigger("reset"), $("#deal_won_result").html(t), window.setTimeout(function () { location.reload() }, 1e3)) : (t = "Could not saved.", $("#deal_won_result").addClass("alert-danger"), $("#frm_deal_won").trigger("reset"), $("#deal_won_result").html(t), window.setTimeout(function () { }, 1e3)) }) }), $("#frm_deal_lost").submit(function (t) { t.preventDefault(); var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(); $.ajax({ url: e, type: a, data: s, cache: !1, processData: !1 }).done(function (t) { "200" == t ? (t = "Your feed back has been submitted successfully.", $("#deal_lost_result").addClass("alert-success"), $("#frm_deal_lost").trigger("reset"), $("#deal_lost_result").html(t), window.setTimeout(function () { location.reload() }, 1e3)) : (t = "Feed back could not saved.", $("#deal_lost_result").addClass("alert-danger"), $("#frm_deal_lost").trigger("reset"), $("#deal_lost_result").html(t), window.setTimeout(function () { }, 1e3)) }) }), $("#notification").ready(function () { var t = $(location).attr("href").split("/"); if ("sales" == t[t.length - 1]) { $.ajax({ url: "/sales/show_notification", type: "post", cache: !1, processData: !1 }).done(function (t) { "" != t && ($("#notification").append(t), $(".toast").toast({ autohide: !1 }), $(".toast").toast("show")) }) } }), $("#frm_csv_import #csv_import").change(function () { var t = this.files[0].type, e = ["application/vnd.ms-excel", "application/csv", "text/csv"]; return t != e[0] && t != e[1] && t != e[2] ? ($("#contacts_csv_upload_response").html("Sorry, only CSV file is allowed to upload."), $(this).val(""), !1) : this.files[0].size > 5e5 ? ($(this).val(""), $("#frm_csv_import #contacts_csv_upload_response").html("Sorry, file size more, kindly upload upto 500KB only"), !1) : void $("#contacts_csv_upload_response").html("Click on Import to upload and process.") }), $("#frm_csv_import").on("submit", function (t) { t.preventDefault(); var e = $(this).attr("action"), a = $(this).attr("method"), s = new FormData(this); $.ajax({ url: e, type: a, data: s, contentType: "application/octet-stream", enctype: "multipart/form-data", contentType: !1, processData: !1, beforeSend: function () { $("#contacts_csv_upload_submit").attr("disabled", "disabled"), $("#frm_csv_import").css("opacity", ".5") } }).done(function (t) { "200" == t ? (t = "Your Contacts successfully uploaded.", $("#contacts_csv_upload_response").html(t)) : 409 == t ? (t = "Sorry you can't upload more contacts at a time. Kindly contact to support.", $("#contacts_csv_upload_response").html(t)) : (t = "Kindly follow as per demo CSV file. Contacts could not uploaded.", $("#contacts_csv_upload_response").html(t)), $("#frm_csv_import").css("opacity", ""), $("#contacts_csv_upload_submit").removeAttr("disabled") }) }), $(".open_task_email_modal").click(function () { var t = $(this).data("id"); $("input#email_task_id").val(t), $("#send_task_email_modal").modal("show") }), $("#frm_send_task_email").on("submit", function (t) { t.preventDefault(), $("#send_task_email_submit").attr("disabled", !0); var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(), o = s.split("&"); (o = o[1].split("="))[1]; $.ajax({ url: e, type: a, data: s, cache: !1, processData: !1 }).done(function (t) { if ($("#send_task_email_submit").attr("disabled", !1), "200" == t) { $("#server-result_send_email").removeClass("alert-danger"), $("#server-result_send_email").removeClass("alert-warning"), $("#server-result_send_email").addClass("alert-success"), $("#server-result_send_email").html("Mail sent successfully. All Task Status as Label and Deal as Sub-label created into your Gmail."), setTimeout(function () { $("#frm_send_task_email").trigger("reset"), $("#task_email_body").val(""), $("#send_task_email_modal").modal("toggle") }, 1e3) } else $("#server-result_send_email").addClass("alert-danger"), t = "Mail could not sent.", $("#server-result_send_email").html(t) }) }), $(".sales_task_edit_modal_open").click(function () { var t = $(this).data("id"); $("input#task_edit_id").val(t); $.ajax({ url: "/sales/get_task_details", type: "post", data: { task_id: t } }).done(function (t) { if ("" != t) { t = $.parseJSON(t)[0], $("#edit_task_modal #todo_detail").val(t.Notes), $("#edit_task_modal #task_update").val(t.Task_Update), $("#edit_task_modal .form-check-input").each(function (e, a) { "todo_desc_" + t.Todo_Desc_ID == a.id && $(a).prop("checked", !0) }), $("#todo_status > [value=" + t.Task_Status + "]").attr("selected", "true"); var e = t.Todo_Due_Date, a = e.substr(0, 10), s = e.substr(11), o = s.split(" to "), d = null, i = null, n = null, r = 0; o.forEach(t => { var e; if (0 == r) if ("am" == (e = t.split(" "))[1]) e[0].length < 5 && (s = "0" + e[0]), d = s; else { if (e[0].length < 5) { var a = e[0].split(":"); d = parseInt(a[0]) + 12, e[0] = d + ":" + a[1] } d = e[0] } else if ("am" == (e = t.split(" "))[1]) e[0].length < 5 && (s = "0" + e[0]), i = s; else { if (e[0].length < 5) { a = e[0].split(":"); i = parseInt(a[0]) + 12, e[0] = i + ":" + a[1] } i = e[0] } r += 1 }); var l = (new Date("1970-1-1 " + i) - new Date("1970-1-1 " + d)) / 1e3 / 60; if (l > 59) { var c = l / 60, _ = l % 60; n = (c = c < 10 ? "0" + c : c) + ":" + (_ = _ < 10 ? "0" + _ : _) } else n = "00:" + l; $("#edit_task_modal #duration option[value=" + l + "]", n).attr("selected", "selected"), $("#edit_task_modal #todo_due_date_edit").val(a), $("#edit_task_modal #todo_due_time").val(d), $("#edit_task_modal #duration").val(n), $("#edit_task_modal #deal").val(t.Deal); var u = [], m = {}; m.csrf = $("#edit_task_modal #csrf").val(), m.stage = $("#edit_task_modal #stage").val(), m.task_edit_id = $("#edit_task_modal #task_edit_id").val(), m.todo_detail = t.Notes, m.task_update = t.Task_Update, m.todo_due_date_edit = a, m.todo_due_time = s, m.duration = n, m.deal = t.Deal, u.push(m), $("#edit_task_modal #existing_data").val(JSON.stringify(u)), $("#edit_task_modal").modal("show") } }) }), $(document).on("click", "#todo_update_submit", function (t) { t.preventDefault(), $("#todo_update_submit").attr("disabled", !0); var e = $("#frm_edit_task").attr("action"), a = $("#frm_edit_task").attr("method"), s = $.parseJSON($("#edit_task_modal #existing_data").val()), o = []; if ("" == $("#edit_task_modal #task_update").val()) { $("#server-result_todo_edit").toggleClass("alert-danger"); var d = "Task could not updated. Fill all the required fields first."; return $("#server-result_todo_edit").html(d), $("#todo_update_submit").attr("disabled", !1), !1 } o.push({ csrf: $("#edit_task_modal #csrf").val(), stage: $("#edit_task_modal #stage").val(), task_edit_id: $("#edit_task_modal #task_edit_id").val(), todo_detail: $("#edit_task_modal #todo_detail").val(), todo_status: $("#edit_task_modal #todo_status").val(), task_update: $("#edit_task_modal #task_update").val(), todo_due_date: $("#edit_task_modal #todo_due_date_edit").val(), todo_due_time: $("#edit_task_modal #todo_due_time").val(), duration: $("#edit_task_modal #duration").val(), deal: $("#edit_task_modal #deal").val(), owner: $("#edit_task_modal #owner").val() }); $.parseJSON(JSON.stringify(o)); if (diff(o[0], s[0]) > 0) $.ajax({ url: e, type: a, data: { data: o[0] }, dataType: "json" }).done(function (t) { $("#todo_update_submit").attr("disabled", !1), "200" == t ? ($("#server-result_todo_edit").addClass("alert-success"), t = "Your Task successfully updated.", $("#server-result_todo_edit").html(t), window.setTimeout(function () { location.reload() }, 1e3)) : 409 == t ? ($("#server-result_todo_edit").addClass("alert-danger"), t = "Task could not updated.", $("#server-result_todo_edit").html(t), window.setTimeout(function () { }, 1e3)) : ($("#server-result_todo_edit").addClass("alert-danger"), t = "Kindly check the details.", $("#server-result_todo_edit").html(t), window.setTimeout(function () { }, 1e3)) }); else { d = "All data are same. Nothing to update."; $("#edit_task_modal #server-result_todo_edit").html(d), window.setTimeout(function () { $("#edit_task_modal").modal("hide") }, 1e3) } }), $("#frm_add_todo #get_select_deals").click(function (t) { t.preventDefault(), $("#frm_add_todo #get_select_deals").hide(); $.ajax({ url: "/sales/get_deals", type: "POST", data: {}, dataType: "json", cache: !1, processData: !1 }).done(function (t) { if ("200" == t.status) { $("#frm_add_todo #deal").show(); var e = t.data; $("#frm_add_todo #deal").find("option").remove(), $.each(e, function (t, e) { $("#frm_add_todo #deal").append('<option value="' + e.id + '">' + e.project_type + "</option>") }) } else t = "No Deal." }) }), $(document).on("submit", "#frm_data_contact_delete", function (t) { if (t.preventDefault(), 1 != confirm("Are you sure to delete this contact?")) return !1; var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(); $.ajax({ url: e, type: a, data: s, cache: !1, processData: !1 }).done(function (t) { if ("200" != t) return !1; location.reload() }) }), $(document).on("submit", "#frm_data_contact_unhide", function (t) { if (t.preventDefault(), 1 != confirm("Are you sure to un-hide and active this contact?")) return !1; var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(); $.ajax({ url: e, type: a, data: s, cache: !1, processData: !1 }).done(function (t) { if ("200" != t) return !1; location.reload() }) }), $(document).on("submit", "#frm_data_sales_task_delete", function (t) { if (t.preventDefault(), 1 != confirm("Are you sure to update this task as completed?")) return !1; var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(); $.ajax({ url: e, type: a, data: s, cache: !1, processData: !1 }).done(function (t) { if ("200" != t) return !1; location.reload() }) }), $(document).on("submit", "#frm_edit_contact", function (t) { t.preventDefault(); var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(), o = form_data_serialize_to_assoc_array(s), d = form_data_serialize_to_assoc_array(o.edit_contact_original_values), i = 0; if ($(d).each(function (t, e) { return e.address1 != o.address1 ? (i = 1, !1) : e.background != o.background ? (i = 1, !1) : e.city != o.city ? (i = 1, !1) : e.company != o.company ? (i = 1, !1) : e.country != o.country ? (i = 1, !1) : e.designation != o.designation ? (i = 1, !1) : e.email != o.email ? (i = 1, !1) : e.first != o.first ? (i = 1, !1) : e.last != o.last ? (i = 1, !1) : e.phone != o.phone ? (i = 1, !1) : e.state != o.state ? (i = 1, !1) : e.street != o.street ? (i = 1, !1) : e.title != o.title ? (i = 1, !1) : e.website != o.website ? (i = 1, !1) : e.zip != o.zip ? (i = 1, !1) : e.lead_referral_source != o.lead_referral_source ? (i = 1, !1) : e.industry != o.industry ? (i = 1, !1) : void 0 }), 1 == i) $.ajax({ url: e, type: a, data: s, cache: !1, processData: !1 }).done(function (t) { "200" == t ? ($("#server-results_edit_contact").removeClass("alert-warning"), $("#server-results_edit_contact").addClass("alert-success"), t = "Contact successfully updated.", $("#server-results_edit_contact").html(t), window.setTimeout(function () { location.reload() }, 1e3)) : (t = "Contact not updated.", $("#server-results_edit_contact").addClass("alert-danger"), $("#server-results_edit_contact").html(t)) }); else { $("#server-results_edit_contact").toggleClass("alert-warning"); $("#server-results_edit_contact").html("Contact not updated. No changes found.") } }), $("#frm_change_password").submit(function (t) { t.preventDefault(), $("#change_password_Button").attr("disabled", !0); var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(); $.ajax({ url: e, type: a, data: s, cache: !1, processData: !1 }).done(function (t) { "200" == t ? (t = "Password successfully updated.", $("#server-results_change_password").removeClass("alert-warning"), $("#server-results_change_password").addClass("alert"), $("#server-results_change_password").addClass("alert-success"), $("#server-results_change_password").html(t), window.setTimeout(function () { $("#change_password_Button").attr("disabled", !1), location.reload() }, 1e3)) : (t = "Password not updated.", $("#server-results_change_password").toggleClass("alert-danger"), $("#server-results_change_password").html(t)) }) }), $("#frm_login_with_code").submit(function (t) { t.preventDefault(), $("#update_login_with_code").attr("disabled", !0); var e = $(this).attr("action"), a = $(this).attr("method"), s = $(this).serialize(); $.ajax({ url: e, type: a, data: s, cache: !1, processData: !1 }).done(function (t) { "200" == t ? (t = "Login with code option successfully updated.", $("#server-results_login_with_code").removeClass("alert-warning"), $("#server-results_login_with_code").addClass("alert"), $("#server-results_login_with_code").addClass("alert-success"), $("#server-results_login_with_code").html(t)) : (t = "Login with code option not updated.", $("#server-results_login_with_code").toggleClass("alert-danger"), $("#server-results_login_with_code").html(t)) }) }) }(jQuery); const convertTime12to24 = t => { const e = t.substr(0, 6), a = t.substr(5, 2); let [s, o] = e.split(":"); return "12" === s && (s = "00"), "pm" === a.toLowerCase && (s = parseInt(s, 10) + 12), `${s}:${o}` }; function diff(t, e) { var a = 0; return $.each(t, function (s, o) { e.hasOwnProperty(s) && e[s] === t[s] || (a += 1) }), a } function form_data_serialize_to_assoc_array(t) { t = t.split("&"); var e = {}; return $(t).each(function (t, a) { var s = a.split("="); e[s[0]] = unescape(s[1]) }), e }